<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check Solana NFT Ownership</title>
    <script type="module">
        import { Connection, PublicKey, TOKEN_PROGRAM_ID } from "https://cdn.jsdelivr.net/npm/@solana/web3.js@latest";
        import { Metaplex } from "https://cdn.jsdelivr.net/npm/@metaplex-foundation/js@latest";

        const COLLECTION_ID = "GzhXjRxLXWkzW6vDVyHgbYmqW75xrfh4WvgVKQ8XA1su";

        async function checkNFTOwnership(address) {
            const connection = new Connection('https://api.mainnet-beta.solana.com', 'confirmed');
            const metaplex = new Metaplex(connection);
            const tokenAccounts = await connection.getParsedTokenAccountsByOwner(
                new PublicKey(address),
                { programId: TOKEN_PROGRAM_ID }
            );

            for (const { account } of tokenAccounts.value) {
                const mint = account.data.parsed.info.mint;
                const metadata = await metaplex.nfts().findByMint(new PublicKey(mint));

                if (metadata.creators?.some(creator => creator.address === COLLECTION_ID)) {
                    return true;
                }
            }
            return false;
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('checkButton').onclick = async () => {
                const address = document.getElementById('solanaAddress').value.trim();
                const resultElement = document.getElementById('result');

                if (!PublicKey.isOnCurve(address)) {
                    resultElement.textContent = 'Invalid Solana address.';
                    return;
                }

                try {
                    const hasNFT = await checkNFTOwnership(address);
                    resultElement.textContent = hasNFT ? 'This address owns an NFT from the collection!' : 'This address does not own any NFTs from the collection.';
                } catch (error) {
                    console.error('Error checking NFT ownership:', error);
                    resultElement.textContent = 'An error occurred while checking ownership.';
                }
            };
        });
    </script>
</head>
<body>
    <h1>Check Solana NFT Ownership</h1>
    <input type="text" id="solanaAddress" placeholder="Enter Solana Address" />
    <button id="checkButton">Check NFT Ownership</button>
    <p id="result"></p>
</body>
</html>
